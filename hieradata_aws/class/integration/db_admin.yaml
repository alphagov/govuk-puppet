govuk_env_sync::tasks:
  "push_content-register_production_integration_daily":
    ensure: "absent"
    hour: "1"
    minute: "45"
    action: "push"
    dbms: "postgresql"
    storagebackend: "s3"
    database: "content-register_production"
    database_hostname: "postgresql-primary"
    temppath: "/tmp/content-register_production"
    url: "govuk-integration-database-backups"
    path: "postgresql-backend"
  "push_email_alert_monitor_integration_daily":
    ensure: "absent"
    hour: "1"
    minute: "10"
    action: "push"
    dbms: "postgresql"
    storagebackend: "s3"
    database: "email-alert-monitor_production"
    database_hostname: "postgresql-primary"
    temppath: "/tmp/email-alert-monitor_production"
    url: "govuk-integration-database-backups"
    path: "postgresql-backend"
  "push_organisations_publisher_integration_daily":
    ensure: "absent"
    hour: "1"
    minute: "10"
    action: "push"
    dbms: "postgresql"
    storagebackend: "s3"
    database: "organisations-publisher_production"
    database_hostname: "postgresql-primary"
    temppath: "/tmp/organisations-publisher_production"
    url: "govuk-integration-database-backups"
    path: "postgresql-backend"
  "push_release_integration_daily":
    ensure: "present"
    hour: "1"
    minute: "15"
    action: "push"
    dbms: "mysql"
    storagebackend: "s3"
    database: "release_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/release_production"
    url: "govuk-integration-database-backups"
    path: "mysql"
  "push_release_integration_daily":
    ensure: "present"
    hour: "0"
    minute: "45"
    action: "push"
    dbms: "mysql"
    storagebackend: "s3"
    database: "release_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/release_integration"
    url: "govuk-integration-database-backups"
    path: "mysql"
  "pull_release_staging_daily":
    ensure: "present"
    hour: "1"
    minute: "30"
    action: "pull"
    dbms: "mysql"
    storagebackend: "s3"
    database: "release_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/release_staging"
    url: "govuk-staging-database-backups"
    path: "mysql"
  # TODO: remove this rule once it's been run on target machines
  "push_signon_integration_daily":
    ensure: "absent"
    hour: "1"
    minute: "15"
    action: "push"
    dbms: "mysql"
    storagebackend: "s3"
    database: "signon_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/signon_production"
    url: "govuk-integration-database-backups"
    path: "mysql"
  "pull_whitehall_staging_daily":
    ensure: "present"
    hour: "1"
    minute: "30"
    action: "pull"
    dbms: "mysql"
    storagebackend: "s3"
    database: "whitehall_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/whitehall_staging"
    url: "govuk-staging-database-backups"
    path: "mysql"
  "push_whitehall_integration_daily":
    ensure: "present"
    hour: "2"
    minute: "30"
    action: "push"
    dbms: "mysql"
    storagebackend: "s3"
    database: "whitehall_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/whitehall_integration"
    url: "govuk-integration-database-backups"
    path: "mysql"
  "pull_licensify_staging_daily": &pull_licensify
    ensure: "present"
    hour: "5"
    minute: "45"
    action: "pull"
    dbms: "documentdb"
    storagebackend: "s3"
    database: "licensify"
    temppath: "/tmp/licensify_staging"
    url: "govuk-staging-database-backups"
    path: "mongo-licensing"
  "pull_licensify_audit_staging_daily":
    <<: *pull_licensify
    database: "licensify-audit"
    ensure: "absent"
  "pull_licensify_refdata_staging_daily":
    <<: *pull_licensify
    database: "licensify-refdata"
    hour: "6"
    minute: "30"
  "pull_govuk_assets_production":
    ensure: "present"
    hour: "3"
    minute: "30"
    action: "pull"
    dbms: "documentdb"
    storagebackend: "s3"
    database: "govuk_assets_production"
    temppath: "/tmp/govuk_assets_production"
    url: "govuk-staging-database-backups"
    path: "mongo-normal"
  "pull_collections_publisher_production_daily":
    ensure: "present"
    hour: "3"
    minute: "15"
    action: "pull"
    dbms: "mysql"
    storagebackend: "s3"
    database: "collections_publisher_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/collections_publisher_production"
    url: "govuk-staging-database-backups"
    path: "mysql"
  "push_collections_publisher_integration_daily":
    ensure: "present"
    hour: "4"
    minute: "30"
    action: "push"
    dbms: "mysql"
    storagebackend: "s3"
    database: "collections_publisher_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/collections_publisher_production"
    url: "govuk-integration-database-backups"
    path: "mysql"
  "pull_contacts_production_daily":
    ensure: "present"
    hour: "4"
    minute: "14"
    action: "pull"
    dbms: "mysql"
    storagebackend: "s3"
    database: "contacts_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/contacts_production"
    url: "govuk-staging-database-backups"
    path: "mysql"
  "push_contacts_integration_daily":
    ensure: "present"
    hour: "4"
    minute: "45"
    action: "push"
    dbms: "mysql"
    storagebackend: "s3"
    database: "contacts_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/contacts_production"
    url: "govuk-integration-database-backups"
    path: "mysql"
  "pull_search_admin_production_daily":
    ensure: "present"
    hour: "2"
    minute: "15"
    action: "pull"
    dbms: "mysql"
    storagebackend: "s3"
    database: "search_admin_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/search_admin_production"
    url: "govuk-staging-database-backups"
    path: "mysql"
  "push_search_admin_integration_daily":
    ensure: "present"
    hour: "3"
    minute: "15"
    action: "push"
    dbms: "mysql"
    storagebackend: "s3"
    database: "search_admin_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/search_admin_production"
    url: "govuk-integration-database-backups"
    path: "mysql"
  "pull_maslow_production":
    ensure: "present"
    hour: "2"
    minute: "35"
    action: "pull"
    dbms: "documentdb"
    storagebackend: "s3"
    database: "maslow_production"
    temppath: "/tmp/maslow_production"
    url: "govuk-production-database-backups"
    path: "mongo-normal"
  "pull_govuk_content_production":
    ensure: "present"
    hour: "4"
    minute: "20"
    action: "pull"
    dbms: "documentdb"
    storagebackend: "s3"
    database: "govuk_content_production"
    temppath: "/tmp/govuk_content_production"
    url: "govuk-production-database-backups"
    path: "mongo-normal"
  "pull_short_url_manager_production":
    ensure: "present"
    hour: "3"
    minute: "25"
    action: "pull"
    dbms: "documentdb"
    storagebackend: "s3"
    database: "short_url_manager_production"
    temppath: "/tmp/short_url_manager_production"
    url: "govuk-production-database-backups"
    path: "mongo-normal"
  "pull_travel_advice_publisher_production":
    ensure: "present"
    hour: "3"
    minute: "35"
    action: "pull"
    dbms: "documentdb"
    storagebackend: "s3"
    database: "travel_advice_publisher_production"
    temppath: "/tmp/travel_advice_publisher_production"
    url: "govuk-production-database-backups"
    path: "mongo-normal"
govuk_env_sync::s3_sync_tasks:
  "s3_sync_content_publisher_from_staging_daily":
    ensure: "present"
    hour: "0"
    minute: "45"
    source_bucket: govuk-staging-content-publisher-activestorage
    destination_bucket: govuk-integration-content-publisher-activestorage
    delete: true
