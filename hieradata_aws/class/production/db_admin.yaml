govuk_env_sync::tasks:
  "push_ckan_production_daily":
    ensure: "present"
    hour: "23"
    minute: "30"
    action: "push"
    dbms: "postgresql"
    storagebackend: "s3"
    database: "ckan_production"
    temppath: "/tmp/ckan_production"
    url: "govuk-production-database-backups"
    path: "postgresql-backend"
  "push_content_data_admin_production_daily":
    ensure: "present"
    hour: "1"
    minute: "0"
    action: "push"
    dbms: "postgresql"
    storagebackend: "s3"
    database: "content_data_admin_production"
    temppath: "/tmp/content_data_admin_production_push"
    url: "govuk-production-database-backups"
    path: "postgresql-backend"
  "push_local-links-manager_production_daily":
    ensure: "present"
    hour: "3"
    minute: "0"
    action: "push"
    dbms: "postgresql"
    storagebackend: "s3"
    database: "local-links-manager_production"
    temppath: "/tmp/local-links-manager_production"
    url: "govuk-production-database-backups"
    path: "postgresql-backend"
  "push_link-checker-api_production_daily":
    ensure: "present"
    hour: "3"
    minute: "0"
    action: "push"
    dbms: "postgresql"
    storagebackend: "s3"
    database: "link_checker_api_production"
    temppath: "/tmp/link-checker-api_production"
    url: "govuk-production-database-backups"
    path: "postgresql-backend"
  "push_support-contacts_production_daily":
    ensure: "present"
    hour: "2"
    minute: "30"
    action: "push"
    dbms: "postgresql"
    storagebackend: "s3"
    database: "support_contacts_production"
    temppath: "/tmp/"
    url: "govuk-production-database-backups"
    path: "postgresql-backend"
  "push_licensify_production": &push_licensify
    hour: "1"
    minute: "30"
    action: "push"
    dbms: "documentdb"
    storagebackend: "s3"
    database: "licensify"
    temppath: "/tmp/licensify_production"
    url: "govuk-production-database-backups"
    path: "mongo-licensing"
  "push_licensify_refdata_production":
    <<: *push_licensify
    database: "licensify-refdata"
  "push_licensify_audit_production":
    <<: *push_licensify
    hour: "1"
    minute: "45"
    database: "licensify-audit"
  # The pull_*_production configs below are not run automatically. The
  # ensure:disabled means that they are present on the db_admin machine but
  # without crontab entries. This allows for manual restores when needed.
  "pull_email_alert_api_production":
    ensure: "disabled"
    hour: "0"
    minute: "00"
    action: "pull"
    dbms: "postgresql"
    storagebackend: "s3"
    database: "email-alert-api_production"
    temppath: "/tmp/email-alert-api_production"
    url: "govuk-production-database-backups"
    path: "postgresql-backend"
  "pull_licensify_production": &pull_licensify
    ensure: "disabled"
    hour: "0"
    minute: "00"
    action: "pull"
    dbms: "documentdb"
    storagebackend: "s3"
    database: "licensify"
    temppath: "/tmp/licensify_production"
    url: "govuk-production-database-backups"
    path: "mongo-licensing"
  "pull_licensify_refdata_production":
    <<: *pull_licensify
    ensure: "disabled"
    database: "licensify-refdata"
  "pull_licensify_audit_production":
    <<: *pull_licensify
    ensure: "disabled"
    database: "licensify-audit"
  "pull_publishing_api_production":
    ensure: "disabled"
    hour: "0"
    minute: "00"
    action: "pull"
    dbms: "postgresql"
    storagebackend: "s3"
    database: "publishing_api_production"
    temppath: "/tmp/publishing_api_production"
    url: "govuk-production-database-backups"
    path: "postgresql-backend"
