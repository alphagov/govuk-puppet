govuk_env_sync::tasks:
  # TODO: remove this rule once it's been run on target machines
  "push_collections_publisher_production_daily":
    ensure: "absent"
    hour: "0"
    minute: "12"
    action: "push"
    dbms: "mysql"
    storagebackend: "s3"
    database: "collections_publisher_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/collections_publisher_production"
    url: "govuk-production-database-backups"
    path: "mysql"
  # TODO: remove this rule once it's been run on target machines
  "pull_collections_publisher_production_daily":
    ensure: "absent"
    hour: "1"
    minute: "00"
    action: "pull"
    dbms: "mysql"
    storagebackend: "s3"
    database: "collections_publisher_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/collections_publisher_production"
    url: "govuk-production-database-backups"
    path: "mysql"
  "push_contacts_production_daily":
    ensure: "present"
    hour: "0"
    minute: "14"
    action: "push"
    dbms: "mysql"
    storagebackend: "s3"
    database: "contacts_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/contacts_production"
    url: "govuk-production-database-backups"
    path: "mysql"
  "pull_contacts_production_daily":
    ensure: "disabled"
    hour: "1"
    minute: "15"
    action: "pull"
    dbms: "mysql"
    storagebackend: "s3"
    database: "contacts_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/contacts_production"
    url: "govuk-production-database-backups"
    path: "mysql"
  "push_govuk_assets_production":
    ensure: "present"
    hour: "1"
    minute: "00"
    action: "push"
    dbms: "documentdb"
    storagebackend: "s3"
    database: "govuk_assets_production"
    temppath: "/tmp/govuk_assets_production"
    url: "govuk-production-database-backups"
    path: "mongo-normal"
  "push_govuk_content_production":
    ensure: "present"
    hour: "2"
    minute: "51"
    action: "push"
    dbms: "documentdb"
    storagebackend: "s3"
    database: "govuk_content_production"
    temppath: "/tmp/govuk_content_production"
    url: "govuk-production-database-backups"
    path: "mongo-normal"
  "push_maslow_production":
    ensure: "present"
    hour: "1"
    minute: "21"
    action: "push"
    dbms: "documentdb"
    storagebackend: "s3"
    database: "maslow_production"
    temppath: "/tmp/maslow_production"
    url: "govuk-production-database-backups"
    path: "mongo-normal"
  "pull_maslow_production":
    ensure: "disabled"
    hour: "1"
    minute: "05"
    action: "pull"
    dbms: "documentdb"
    storagebackend: "s3"
    database: "maslow_production"
    temppath: "/tmp/maslow_production"
    url: "govuk-production-database-backups"
    path: "mongo-normal"
  "push_search_admin_production_daily":
    ensure: "present"
    hour: "0"
    minute: "20"
    action: "push"
    dbms: "mysql"
    storagebackend: "s3"
    database: "search_admin_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/search_admin_production"
    url: "govuk-production-database-backups"
    path: "mysql"
  "pull_search_admin_production_daily":
    ensure: "disabled"
    hour: "0"
    minute: "20"
    action: "pull"
    dbms: "mysql"
    storagebackend: "s3"
    database: "search_admin_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/search_admin_production"
    url: "govuk-production-database-backups"
    path: "mysql"
  "push_short_url_manager_production":
    ensure: "present"
    hour: "1"
    minute: "25"
    action: "push"
    dbms: "documentdb"
    storagebackend: "s3"
    database: "short_url_manager_production"
    temppath: "/tmp/short_url_manager_production"
    url: "govuk-production-database-backups"
    path: "mongo-normal"
  "pull_short_url_manager_production":
    ensure: "disabled"
    hour: "1"
    minute: "25"
    action: "pull"
    dbms: "documentdb"
    storagebackend: "s3"
    database: "short_url_manager_production"
    temppath: "/tmp/short_url_manager_production"
    url: "govuk-production-database-backups"
    path: "mongo-normal"
  "push_signon_production_daily":
    ensure: "present"
    hour: "0"
    minute: "30"
    action: "push"
    dbms: "mysql"
    storagebackend: "s3"
    database: "signon_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/signon_production"
    url: "govuk-production-database-backups"
    path: "mysql"
  "push_travel_advice_publisher_production":
    ensure: "present"
    hour: "1"
    minute: "35"
    action: "push"
    dbms: "documentdb"
    storagebackend: "s3"
    database: "travel_advice_publisher_production"
    temppath: "/tmp/travel_advice_publisher_production"
    url: "govuk-production-database-backups"
    path: "mongo-normal"
  "pull_travel_advice_publisher_production":
    ensure: "disabled"
    hour: "1"
    minute: "35"
    action: "pull"
    dbms: "documentdb"
    storagebackend: "s3"
    database: "travel_advice_publisher_production"
    temppath: "/tmp/travel_advice_publisher_production"
    url: "govuk-production-database-backups"
    path: "mongo-normal"
  "push_licensify_production": &push_licensify
    hour: "1"
    minute: "30"
    action: "push"
    dbms: "documentdb"
    storagebackend: "s3"
    database: "licensify"
    temppath: "/tmp/licensify_production"
    url: "govuk-production-database-backups"
    path: "mongo-licensing"
  "push_licensify_refdata_production":
    <<: *push_licensify
    database: "licensify-refdata"
  "push_licensify_audit_production":
    <<: *push_licensify
    hour: "1"
    minute: "45"
    database: "licensify-audit"
  "push_release_production_daily":
    ensure: "present"
    hour: "0"
    minute: "15"
    action: "push"
    dbms: "mysql"
    storagebackend: "s3"
    database: "release_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/release_production"
    url: "govuk-production-database-backups"
    path: "mysql"
  # The pull_*_production configs below are not run automatically. The
  # ensure:disabled means that they are present on the db_admin machine but
  # without crontab entries. This allows for manual restores when needed.
  "pull_govuk_assets_production":
    ensure: "disabled"
    hour: "0"
    minute: "00"
    action: "pull"
    dbms: "documentdb"
    storagebackend: "s3"
    database: "govuk_assets_production"
    temppath: "/tmp/govuk_assets_production"
    url: "govuk-production-database-backups"
    path: "mongo-normal"
  "pull_licensify_production": &pull_licensify
    ensure: "disabled"
    hour: "0"
    minute: "00"
    action: "pull"
    dbms: "documentdb"
    storagebackend: "s3"
    database: "licensify"
    temppath: "/tmp/licensify_production"
    url: "govuk-production-database-backups"
    path: "mongo-licensing"
  "pull_licensify_refdata_production":
    <<: *pull_licensify
    ensure: "disabled"
    database: "licensify-refdata"
  "pull_licensify_audit_production":
    <<: *pull_licensify
    ensure: "disabled"
    database: "licensify-audit"
  "pull_release_production":
    ensure: "disabled"
    hour: "0"
    minute: "00"
    action: "pull"
    dbms: "mysql"
    storagebackend: "s3"
    database: "release_production"
    database_hostname: "mysql-primary"
    temppath: "/tmp/release_production"
    url: "govuk-production-database-backups"
    path: "mysql"
