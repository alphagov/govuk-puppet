---
- job:
  name: Dump_Content
  display-name: Dump_Content
  project-type: freestyle
  description: >
    This job dumps content from the content-store and stores it in an artifact.
  logrotate:
    numToKeep: 10
  publishers:
    - trigger-parameterized-builds:
      - project: run-rake-task
        predefined-parameters: |
          TARGET_APPLICATION=content-store
          MACHINE_CLASS=content_store
          RAKE_TASK=dump_content[content.csv.gz]
    - trigger-parameterized-builds:
      - project: run-rake-task
        predefined-parameters: |
          TARGET_APPLICATION=content-store
          MACHINE_CLASS=draft_content_store
          RAKE_TASK=dump_routes[draft-content.csv.gz]
    - archive:
        artifacts: '*.csv.gz'
        latest-only: true
  triggers:
    - timed: 'H 5 * * *'
