/*

Required Variables:

  port:             StatsD listening port [default: 8125]

Graphite Required Variables:

(Leave these unset to avoid sending stats to Graphite.
 Set debug flag and leave these unset to run in 'dry' debug mode -
 useful for testing statsd clients without a Graphite server.)

  graphiteHost:     hostname or IP of Graphite server
  graphitePort:     port of Graphite server

Optional Variables:

  backends:         an array of backends to load. Each backend must exist
                    by name in the directory backends/. If not specified,
                    the default graphite backend will be loaded.
  debug:            debug flag [default: false]
  address:          address to listen on over UDP [default: 0.0.0.0]
  port:             port to listen for messages on over UDP [default: 8125]
  mgmt_address:     address to run the management TCP interface on
                    [default: 0.0.0.0]
  mgmt_port:        port to run the management TCP interface on [default: 8126]
  debugInterval:    interval to print debug information [ms, default: 10000]
  dumpMessages:     log all incoming messages
  flushInterval:    interval (in ms) to flush to Graphite
  percentThreshold: for time information, calculate the Nth percentile(s)
                    (can be a single value or list of floating-point values)
                    [%, default: 90]
  keyFlush:         log the most frequently sent keys [object, default: undefined]
    interval:       how often to log frequent keys [ms, default: 0]
    percent:        percentage of frequent keys to log [%, default: 100]
    log:            location of log file for frequent keys [default: STDOUT]

  console:
    prettyprint:    whether to prettyprint the console backend
                    output [true or false, default: true]

Smart Repeater Required Variables:
  smartRepeater:
    hosts:              array of host data to repeat information to
      hostname:         hostname or ip address
      port:             TCP port
      protocol:         udp4, udp6, tcp4, tcp6

Smart Repeater Optional Variables:
  smartRepeater:
    prefix:               stat prefix (prepended to all outgoing stats)
    checkExistingPrefix:  true to not prepend the prefix if it's already there
    batchSize:            max message size to send downstream
    blacklist:            array of regexes for blacklisting metrics
{
  graphitePort: 2003
, graphiteHost: "<%= @graphite_hostname -%>"
<% if @use_smart_repeater %>
  smartRepeater: {
    prefix: "smart_repeater",
    checkExistingPrefix: false,
    batchSize: 1024,
    hosts: [
      { hostname: "<%= @smart_repeater_hostname %>", port: 8125, protocol: "tcp4" },
    ],
    blacklist: [
      /^statsd/
    ]
  },
<% end %>
, port: 8125
, flushInterval: 5000
}
